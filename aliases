# Aliases
# forked from https://github.com/mathiasbynens/dotfiles

# Scala
alias scala='scala -Dscala.color'

# Tmux
alias tmn='tmux new -s $(basename $(pwd))'

# Less
alias -g L=less

# Update all dependencies to their latest version
npm-update-deps() {
  if [[ $1 == "--dev" ]]; then
    jq -r '.devDependencies|keys|.[]' package.json | xargs -I% npm install %@latest --save-dev
  else
    jq -r '.dependencies|keys|.[]' package.json | xargs -I% npm install %@latest --save
  fi
}

# Hub
eval "$(hub alias -s)"

# tree
alias tree='tree -C'

# Syntax highlight
alias -g ccat='pygmentize -g'

# Latexian
alias latexian='open -a Latexian'

# LÖVE
alias love='exec /Applications/love.app/Contents/MacOS/love'

# Commands
alias flushdns='dscacheutil -flushcache'
alias ctime="date '+%s'"
alias untgz="tar -xzvf"

# Unformat text
alias unformat='pbpaste | pbcopy'

# Shortcuts
alias h="history"
alias j="jobs"
alias o="open"
alias oo="open ."
alias tac="tail -r"

function md { mkdir -p "$1" && cd "$1" }

# Postgres
alias psql='/Applications/Postgres.app/Contents/Versions/9.4/bin'/psql -p5432

# Bundler
alias be='bundle exec'

# OS X has no `md5sum`, so use `md5` as a fallback
alias md5sum="md5"

# Recursively delete `.DS_Store` files
alias cleanup="find . -type f -name '*.DS_Store' -ls -delete"

# File size
alias fs="stat -c \"%s bytes\""

# Hide/show all desktop icons (useful when presenting)
alias hidedesktop="defaults write com.apple.finder CreateDesktop -bool false && killall Finder"
alias showdesktop="defaults write com.apple.finder CreateDesktop -bool true && killall Finder"

# URL-encode strings
alias urlencode='python -c "import sys, urllib as ul; print ul.quote_plus(sys.argv[1]);"'

# Empty the Trash on all mounted volumes and the main HDD
# Also, clear Apple’s System Logs to improve shell startup speed
alias emptytrash="sudo rm -rfv /Volumes/*/.Trashes; sudo rm -rfv ~/.Trash; sudo rm -rfv /private/var/log/asl/*.asl;"

# http://stackoverflow.com/questions/4422491/how-do-i-trim-lines-read-from-standard-input-on-bash
trim () { read -r line; echo "$line"; }

# AnyBar
function anybar { echo -n $1 | nc -4u -w0 localhost ${2:-1738}; }

# sqlite3 ~/Library/Preferences/com.apple.LaunchServices.QuarantineEventsV* 'delete from LSQuarantineEvent';
# echo ~/Library/Preferences/com.apple.LaunchServices.QuarantineEventsV*

# PostgreSQL
alias postgres-start="pg_ctl -D /usr/local/var/postgres -l /usr/local/var/postgres/server.log start"
alias postgres-stop="pg_ctl -D /usr/local/var/postgres stop -s -m fast"

# Java
# http://superuser.com/a/568016

alias java_ls='/usr/libexec/java_home -V 2>&1 | grep -E "\d.\d.\d[,_]" | cut -d , -f 1 | colrm 1 4 | grep -v Home | sort | uniq'

function setjdk() {
  if [ $# -ne 0 ]; then
   removeFromPath '/System/Library/Frameworks/JavaVM.framework/Home/bin'
   if [ -n "${JAVA_HOME+x}" ]; then
    removeFromPath $JAVA_HOME
   fi
   export JAVA_HOME=`/usr/libexec/java_home -v $@`
   export PATH=$JAVA_HOME/bin:$PATH
  fi
  echo JAVA_HOME set to $JAVA_HOME
  java -version
 }
 function removeFromPath() {
  export PATH=$(echo $PATH | sed -E -e "s;:$1;;" -e "s;$1:?;;")
 }

function mirror-site() {
  wget \
     --recursive \
     --no-clobber \
     --page-requisites \
     --html-extension \
     --convert-links \
     --domains $1 \
     --no-parent \
     $2
}

